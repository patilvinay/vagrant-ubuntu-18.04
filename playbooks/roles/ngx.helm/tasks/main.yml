---
- name: Checking if helm already installed
  shell: helm list --namespace="{{ helm_ns }}" | grep  "{{ app_name }}" | wc -w
  register: result
  become: vagrant 
- debug: 
     #var:   result.stdout_lines
     msg: "{{ chart_path }}"

- name: run Helm uninstall
  shell: "helm uninstall {{ app_name }} --namespace={{ helm_ns }}"
  become: vagrant 
  when: result.stdout_lines[0]  !=  "0"

- name: run Helm install
  shell: "helm install  {{ app_name }} {{ chart_path }} --namespace={{ helm_ns }}"
  register: result
  become: vagrant 
  #when: result.stdout_lines[0]  ==  "0"